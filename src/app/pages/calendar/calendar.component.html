<div class="calender-page">
  <div class="calendar-container">
    <div class="hotel-container">
      <div class="hotel-logos" [ngClass]="{'active':hotelId==123}" (click)="changeHotel(123)">
        <img src="/assets/img/sub_hotel_logos/PBS.png" alt="">
      </div>
      <div class="hotel-logos" [ngClass]="{'active':hotelId==124}" (click)="changeHotel(124)">
        <img src="/assets/img/sub_hotel_logos/BVP.png" alt="">
      </div>
      <div class="hotel-logos" [ngClass]="{'active':hotelId==125}" (click)="changeHotel(125)">
        <img src="/assets/img/sub_hotel_logos/BPW.png" alt="">
      </div>
    </div>
    <div class="calender-body">
      <ngb-datepicker #dp (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t"
        outsideDays="hidden" [minDate]="minDate" (navigate)="onNavigate($event)" />

      <ng-template #t let-date let-focused="focused">
        <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)"
          [class.disabled]="isDisabled(date)" [class.stopsell]="isStopsell(date)"
          [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date"
          (mouseleave)="hoveredDate = null">
          <div style="margin-bottom:15px;">{{ date.day }}</div>
          <div *ngIf="date?.year && date?.month && date?.day && !isDisabled(date)" >
            <span >{{ (priceModuleData[date.year + '-' + ('0' + date.month).slice(-2) + '-' + ('0' +
              date.day).slice(-2)]) | currency:'$' }}</span>
          </div>
        </span>
      </ng-template>
    </div>
  </div>
  <div class="book-direct-container">
    <div class="book-direct-head">
      <h3>Book Direct & Save!</h3>
    </div>
    @if (bestPriceLoading) {
    <section class="dots-container">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </section>
    }
    @else {
    <div class="book-direct-content">
      <div class="best-price-text">
        <span>Best Price Available</span>
      </div>
      <div class="best-price-value">
        <span>{{bestPriceData?.data?.price_data?.direct?.amount | currency}} </span>
      </div>
    </div>
    @for (item of bestPriceData?.data?.price_data?.other|keyvalue; track $index) {
    <div class="channels-price-list">
      <div class="channel-name">
        <span>{{item.value?.channelName}}</span>
      </div>
      <div class="channel-price">
        <span>{{item.value?.amount | currency}}</span>
      </div>
    </div>
    <hr>
    }
    }

    <div class="adult-child-info">
      <div class="info">
        <div class="info-left">
          <span class="heading">Adults</span>
          <br>
          <span class="sub-heading">Ages 13 or above</span>
        </div>
        <div class="info-right">
          <button [disabled]="adultCount<=1" (click)="adultCount = adultCount-1;">-</button>
          <span>{{adultCount}}</span>
          <button [disabled]="adultCount>=6" (click)="adultCount = adultCount+1;">+</button>
        </div>
      </div>
      <div class="info">
        <div class="info-left">
          <span class="heading">Kids</span>
          <br>
          <span class="sub-heading">Ages 2-12</span>
        </div>
        <div class="info-right">
          <button [disabled]="childCount<=0" (click)="childCount = childCount-1;">-</button>
          <span>{{childCount}}</span>
          <button [disabled]="childCount>=4" (click)="childCount = childCount+1;">+</button>
        </div>
      </div>
      <button class="search-btn" (click)="searchRooms()">Search</button>
    </div>
  </div>
</div>
